<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Under Construction - Stardew Labs</title>
        <style>
            :root {
                --font-mono:
                    monospace, -apple-system, BlinkMacSystemFont, "Segoe UI",
                    Arial, sans-serif;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background: linear-gradient(
                    to bottom,
                    #0a0a1a 0%,
                    #1a1a2e 40%,
                    #2a2a2a 70%,
                    #2a2a2a 100%
                );
                color: white;
                font-family: var(--font-mono);
                min-height: 100vh;
                display: flex;
                flex-direction: column;
            }

            .hero {
                flex: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 40px 20px;
                position: relative;
                overflow: hidden;
            }

            .night-sky {
                position: absolute;
                top: 0;
                left: 50%;
                width: 200vw;
                height: 200vw;
                transform-origin: 50% 100%;
                animation: rotateSky 900s linear infinite;
                will-change: transform;
                transform: translate3d(-50%, 0, 0);
            }

            @keyframes rotateSky {
                from {
                    transform: translate3d(-50%, 0, 0) rotate(0deg);
                }
                to {
                    transform: translate3d(-50%, 0, 0) rotate(360deg);
                }
            }

            .sky-star {
                position: absolute;
                background: white;
                border-radius: 50%;
                animation: twinkle 6s ease-in-out infinite;
                will-change: opacity;
            }

            @keyframes twinkle {
                0%,
                100% {
                    opacity: 0.3;
                }
                30% {
                    opacity: 1;
                }
            }

            .meteors-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 2;
            }

            .meteor {
                position: absolute;
                opacity: 0;
                will-change: transform, opacity;
            }

            .meteor-head {
                width: 4px;
                height: 4px;
                background: radial-gradient(
                    circle,
                    white,
                    rgba(255, 255, 255, 0.8)
                );
                border-radius: 50%;
                box-shadow: 0 0 4px rgba(255, 255, 255, 0.6);
            }

            .meteor-tail {
                position: absolute;
                top: 50%;
                left: -70px;
                width: 60px;
                height: 2px;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 200, 150, 0.2) 30%,
                    rgba(255, 220, 180, 0.4) 70%,
                    transparent 95%
                );
                transform: translateY(-50%);
                filter: blur(0.5px);
            }

            .logo-container {
                text-align: center;
                max-width: 1200px;
                width: 100%;
                position: relative;
                z-index: 3;
            }

            .logo-text {
                font-size: clamp(60px, 15vw, 180px);
                font-weight: 900;
                letter-spacing: 0.02em;
                line-height: 0.9;
                display: block;
            }

            .horizon {
                height: 1px;
                background: linear-gradient(
                    to right,
                    transparent,
                    rgba(255, 255, 255, 0.3) 50%,
                    transparent
                );
                position: relative;
                z-index: 4;
            }

            .content {
                background-color: transparent;
                padding: 40px 20px 60px;
                position: relative;
                z-index: 4;
            }

            .content-wrapper {
                max-width: 1200px;
                margin: 0 auto;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 40px;
                align-items: start;
            }

            .right-content p {
                font-family: var(--font-mono);
                font-size: clamp(18px, 2.5vw, 24px);
                line-height: 1.1;
                text-align: right;
            }

            .left-content p {
                font-family: var(--font-mono);
                font-size: clamp(18px, 2.5vw, 24px);
                line-height: 1.6;
                text-align: left;
            }

            .contact {
                font-size: 16px;
                line-height: 1.8;
                margin-top: 30px;
            }

            .contact strong {
                display: block;
                margin-bottom: 5px;
            }

            .contact a {
                color: white;
                text-decoration: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.3);
                transition: border-color 0.3s;
            }

            .contact a:hover {
                border-bottom-color: white;
            }

            @media (max-width: 768px) {
                .content-wrapper {
                    grid-template-columns: 1fr;
                    gap: 20px;
                }

                .logo-text {
                    letter-spacing: 0;
                }
            }
        </style>
    </head>
    <body>
        <div class="hero">
            <div class="night-sky" id="nightSky"></div>
            <div class="meteors-container" id="meteorsContainer"></div>
            <div class="logo-container">
                <div class="logo-text">STARDEW LABS</div>
            </div>
        </div>

        <div class="horizon"></div>

        <div class="content">
            <div class="content-wrapper">
                <div class="left-content">
                    <p>
                        Ignition is imminent. We (Neehar + Tara) are cooking up
                        something new â€“ watch this space!
                    </p>
                </div>
                <div class="right-content">
                    <div class="contact">
                        <strong>In the meantime, reach us at:</strong>
                        <a href="mailto:hello@stardew.work"
                            >hello@stardew.work</a
                        >
                    </div>
                </div>
            </div>
        </div>
        <script>
            // Configuration object
            const CONFIG = {
                stars: {
                    count: 300,
                    maxSize: 3,
                    minSize: 1,
                    animationDelayMax: 6,
                    animationDurationMin: 2,
                    animationDurationMax: 5,
                },
                meteors: {
                    startXMin: 90,
                    startXMax: 120,
                    startYMin: {
                        whenXOutOfBounds: -10,
                        whenXInBounds: -40,
                    },
                    startYMax: 50,
                    angleMin: 130,
                    angleMax: 160,
                    angleVariation: 15,
                    durationMin: 4,
                    durationMax: 6,
                    showerCountMin: 6,
                    showerCountMax: 12,
                    showerIntervalMin: 80,
                    showerIntervalMax: 230,
                    singleMeteorIntervalMin: 1500,
                    singleMeteorIntervalMax: 5500,
                    nextShowerMin: 3000,
                    nextShowerMax: 8000,
                },
            };

            // Create fixed night sky stars with error handling
            function initializeStars() {
                try {
                    const nightSky = document.getElementById("nightSky");
                    if (!nightSky) {
                        throw new Error("Night sky element not found");
                    }

                    const numSkyStars = CONFIG.stars.count;

                    for (let i = 0; i < numSkyStars; i++) {
                        const star = document.createElement("div");
                        star.className = "sky-star";

                        // Random position
                        star.style.left = Math.random() * 100 + "%";
                        star.style.top = Math.random() * 100 + "%";

                        // Varied sizes
                        const size =
                            CONFIG.stars.minSize +
                            Math.random() *
                                (CONFIG.stars.maxSize - CONFIG.stars.minSize);
                        star.style.width = size + "px";
                        star.style.height = size + "px";

                        // Varied animation delay for twinkling
                        star.style.animationDelay =
                            Math.random() * CONFIG.stars.animationDelayMax +
                            "s";
                        star.style.animationDuration =
                            CONFIG.stars.animationDurationMin +
                            Math.random() *
                                (CONFIG.stars.animationDurationMax -
                                    CONFIG.stars.animationDurationMin) +
                            "s";

                        nightSky.appendChild(star);
                    }
                } catch (error) {
                    console.error("Failed to initialize stars:", error);
                }
            }

            initializeStars();

            // Cache DOM elements with error handling
            let meteorsContainer, heroElement, heroDiagonal;
            let isShowerActive = false;

            function initializeMeteorSystem() {
                try {
                    meteorsContainer =
                        document.getElementById("meteorsContainer");
                    heroElement = document.getElementsByClassName("hero")[0];

                    if (!meteorsContainer) {
                        throw new Error("Meteors container not found");
                    }
                    if (!heroElement) {
                        throw new Error("Hero element not found");
                    }

                    // Cache hero dimensions
                    const heroRect = heroElement.getBoundingClientRect();
                    const heroWidth = heroRect.width;
                    const heroHeight = heroRect.height;
                    heroDiagonal = Math.sqrt(heroWidth ** 2 + heroHeight ** 2);

                    return true;
                } catch (error) {
                    console.error("Failed to initialize meteor system:", error);
                    return false;
                }
            }

            function calculateMeteorStartPosition() {
                const startX =
                    CONFIG.meteors.startXMax -
                    Math.random() *
                        (CONFIG.meteors.startXMax - CONFIG.meteors.startXMin);
                let startY;
                if (startX < 100) {
                    startY =
                        CONFIG.meteors.startYMin.whenXInBounds +
                        Math.random() *
                            (CONFIG.meteors.startYMax -
                                CONFIG.meteors.startYMin.whenXInBounds);
                } else {
                    startY =
                        CONFIG.meteors.startYMin.whenXOutOfBounds +
                        Math.random() *
                            (CONFIG.meteors.startYMax -
                                CONFIG.meteors.startYMin.whenXOutOfBounds);
                }
                return { x: startX, y: startY };
            }

            function calculateMeteorAngle(baseAngle = null) {
                if (baseAngle !== null) {
                    return (
                        baseAngle +
                        (Math.random() * CONFIG.meteors.angleVariation * 2 -
                            CONFIG.meteors.angleVariation)
                    );
                } else {
                    return (
                        CONFIG.meteors.angleMin +
                        Math.random() *
                            (CONFIG.meteors.angleMax - CONFIG.meteors.angleMin)
                    );
                }
            }

            function createMeteorElements() {
                const meteor = document.createElement("div");
                meteor.className = "meteor";

                const head = document.createElement("div");
                head.className = "meteor-head";
                const tail = document.createElement("div");
                tail.className = "meteor-tail";
                meteor.appendChild(head);
                meteor.appendChild(tail);

                return meteor;
            }

            function generateMeteorAnimation(angle, endX, endY) {
                const animationName = `meteor-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
                const keyframes = `
                @keyframes ${animationName} {
                    0% {
                        opacity: 0;
                        transform: translate(0, 0) rotate(${angle}deg);
                    }
                    5% {
                        opacity: 1;
                    }
                    95% {
                        opacity: 1;
                    }
                    100% {
                        opacity: 0;
                        transform: translate(${endX}px, ${endY}px) rotate(${angle}deg);
                    }
                }`;
                return { animationName, keyframes };
            }

            function createMeteor(baseAngle = null) {
                try {
                    if (!meteorsContainer || !heroDiagonal) {
                        console.warn("Meteor system not properly initialized");
                        return;
                    }

                    const meteor = createMeteorElements();
                    const startPos = calculateMeteorStartPosition();

                    meteor.style.left = startPos.x + "%";
                    meteor.style.top = startPos.y + "%";

                    const angle = calculateMeteorAngle(baseAngle);
                    const distance =
                        heroDiagonal + (Math.random() * 2 - 0.5) * 50;
                    const radians = (angle * Math.PI) / 180;
                    const endX = Math.cos(radians) * distance;
                    const endY = Math.sin(radians) * distance;

                    const { animationName, keyframes } =
                        generateMeteorAnimation(angle, endX, endY);

                    const style = document.createElement("style");
                    style.textContent = keyframes;
                    document.head.appendChild(style);

                    const duration =
                        CONFIG.meteors.durationMin +
                        Math.random() *
                            (CONFIG.meteors.durationMax -
                                CONFIG.meteors.durationMin);
                    meteor.style.animation = `${animationName} ${duration}s linear forwards`;

                    meteorsContainer.appendChild(meteor);

                    setTimeout(() => {
                        try {
                            if (meteor.parentNode) meteor.remove();
                            if (style.parentNode) style.remove();
                        } catch (cleanupError) {
                            console.warn(
                                "Error during meteor cleanup:",
                                cleanupError,
                            );
                        }
                    }, duration * 1000);
                } catch (error) {
                    console.error("Error creating meteor:", error);
                }
            }

            function triggerMeteorShower() {
                if (isShowerActive) return;

                isShowerActive = true;
                const showerAngle =
                    CONFIG.meteors.angleMin +
                    Math.random() *
                        (CONFIG.meteors.angleMax - CONFIG.meteors.angleMin);
                const numMeteors =
                    CONFIG.meteors.showerCountMin +
                    Math.floor(
                        Math.random() *
                            (CONFIG.meteors.showerCountMax -
                                CONFIG.meteors.showerCountMin +
                                1),
                    );

                for (let i = 0; i < numMeteors; i++) {
                    setTimeout(
                        () => {
                            createMeteor(showerAngle);
                        },
                        i *
                            (CONFIG.meteors.showerIntervalMin +
                                Math.random() *
                                    (CONFIG.meteors.showerIntervalMax -
                                        CONFIG.meteors.showerIntervalMin)),
                    );
                }

                setTimeout(
                    () => {
                        isShowerActive = false;
                        scheduleNextShower();
                    },
                    numMeteors * 250 + 2000,
                );
            }

            function scheduleNextShower() {
                const nextShowerIn =
                    CONFIG.meteors.nextShowerMin +
                    Math.random() *
                        (CONFIG.meteors.nextShowerMax -
                            CONFIG.meteors.nextShowerMin);
                setTimeout(triggerMeteorShower, nextShowerIn);
            }

            function createSingleMeteor() {
                createMeteor();
                const nextMeteorIn =
                    CONFIG.meteors.singleMeteorIntervalMin +
                    Math.random() *
                        (CONFIG.meteors.singleMeteorIntervalMax -
                            CONFIG.meteors.singleMeteorIntervalMin);
                setTimeout(createSingleMeteor, nextMeteorIn);
            }

            // Initialize meteor system and start animations
            if (initializeMeteorSystem()) {
                // Start scattered single meteors
                for (let i = 0; i < 2; i++) {
                    setTimeout(createSingleMeteor, Math.random() * 2000);
                }

                // Start first meteor shower
                setTimeout(triggerMeteorShower, 2000 + Math.random() * 2000);
            }
        </script>
    </body>
</html>
